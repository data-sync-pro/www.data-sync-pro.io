<!-- Mobile sidebar toggle button -->
<button
  class="mobile-sidebar-toggle"
  (click)="onToggleMobileSidebar()"
  *ngIf="uiState.isMobile"
  mat-icon-button
  aria-label="Toggle navigation">
  <mat-icon>menu</mat-icon>
</button>

<!-- Mobile sidebar overlay -->
<div
  class="sidebar-overlay"
  [class.active]="uiState.mobileSidebarOpen"
  (click)="onCloseMobileSidebar()">
</div>

<!-- Sidebar Content (component itself acts as sidebar) -->
<div class="sidebar-content">
      <!-- Sidebar Header -->
      <div class="sidebar-header">
        <div class="sidebar-title-section" *ngIf="!uiState.sidebarCollapsed">
          <h2 class="sidebar-main-title">Recipes</h2>
          <span class="sidebar-subtitle">{{ recipeCount }} recipes</span>
        </div>
        <button class="sidebar-toggle-btn"
                (click)="onToggleSidebar()"
                *ngIf="!uiState.isMobile"
                [title]="uiState.sidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar'"
                aria-label="Toggle sidebar">
          <mat-icon class="toggle-icon">{{ uiState.sidebarCollapsed ? 'chevron_right' : 'chevron_left' }}</mat-icon>
        </button>
      </div>

      <div class="sidebar-body">
        <!-- Search in sidebar - Expanded -->
        <div class="sidebar-search" *ngIf="!uiState.sidebarCollapsed">
          <button
            class="sidebar-search-btn"
            (click)="onSearchClick()"
            title="Search Recipes (Press / or Ctrl+K for quick access)"
          >
            <lightning-icon
              iconName="utility:search"
              size="x-small"
              alternativeText="Search"
            ></lightning-icon>
            <span class="search-text">Search recipes...</span>
            <span class="search-shortcut">/</span>
          </button>
        </div>

        <!-- Category Navigation -->
        <div class="sidebar-nav">
          <!-- Home -->
          <div class="nav-item home-nav"
               [class.active]="!navigation.category"
               (click)="onHomeClick()">
            <div class="nav-content">
              <mat-icon class="nav-icon">home</mat-icon>
              <span class="nav-text" *ngIf="!uiState.sidebarCollapsed">All Recipes</span>
              <span class="nav-count" *ngIf="!uiState.sidebarCollapsed">{{ recipeCount }}</span>
            </div>
          </div>

          <!-- Search - Collapsed -->
          <div class="nav-item search-nav"
               *ngIf="uiState.sidebarCollapsed"
               (click)="onSearchClick()"
               title="Search Recipes">
            <div class="nav-content">
              <lightning-icon
                iconName="utility:search"
                size="x-small"
                alternativeText="Search"
                class="nav-icon"
              ></lightning-icon>
            </div>
          </div>

          <!-- Categories Section -->
          <div class="nav-section" *ngIf="!uiState.sidebarCollapsed">
            <div class="section-divider"></div>
            <div class="section-label">Categories</div>
          </div>

          <div class="nav-tree">
            <div class="nav-item"
                 *ngFor="let category of categories; trackBy: trackByCategoryName"
                 [class.active]="navigation.category === category.name"
                 (click)="onCategoryClick(category.name)">
              <div class="nav-content">
                <mat-icon class="nav-icon">folder</mat-icon>
                <span class="nav-text" *ngIf="!uiState.sidebarCollapsed">{{ category.displayName }}</span>
                <span class="nav-count" *ngIf="!uiState.sidebarCollapsed">{{ category.count }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
</div>
