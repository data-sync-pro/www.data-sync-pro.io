<div class="form-section basic-info-section">
  <h2>Basic Information</h2>

  <div class="form-row">
    <div class="form-group active-field">
      <label class="checkbox-label">
        <input type="checkbox"
               [(ngModel)]="isActive"
               (change)="onActiveChange()">
        <span class="checkbox-text">Active</span>
      </label>
    </div>

    <div class="form-group">
      <label for="title">Title *</label>
      <input type="text"
             id="title"
             class="dsp-input"
             [(ngModel)]="recipe.title"
             (input)="onRecipeChange()"
             required>
    </div>

    <div class="form-group category-field">
      <label for="category">Categories *</label>
      <div class="category-multi-select">
        <div class="selected-categories" (click)="toggleCategoryDropdown()">
          <span *ngIf="recipeCategories.length === 0" class="placeholder">
            Select categories
          </span>
          <div class="category-tags" *ngIf="recipeCategories.length > 0">
            <span *ngFor="let cat of recipeCategories; trackBy: trackByIndex"
                  class="category-tag">
              {{ cat }}
              <button type="button"
                      class="remove-tag"
                      (click)="toggleCategory(cat); $event.stopPropagation()"
                      aria-label="Remove category">×</button>
            </span>
          </div>
          <span class="dropdown-arrow">▼</span>
        </div>
        <div class="category-options" *ngIf="showCategoryDropdown">
          <label *ngFor="let cat of categories"
                 class="category-option"
                 [class.selected]="isCategorySelected(cat)">
            <input type="checkbox"
                   [checked]="isCategorySelected(cat)"
                   (change)="toggleCategory(cat)">
            <span>{{ cat }}</span>
          </label>
        </div>
      </div>
    </div>
  </div>

  <div class="form-group">
    <label for="overview">Overview *</label>
    <textarea id="overview"
              class="dsp-input"
              rows="3"
              [(ngModel)]="recipe.overview"
              (input)="onRecipeChange()"
              placeholder="Detailed overview of what this recipe does"
              required></textarea>
  </div>

  <div class="form-group">
    <label for="generalUseCase">General Use Case</label>
    <textarea id="generalUseCase"
              class="dsp-input"
              rows="3"
              [(ngModel)]="recipe.generalUseCase"
              (input)="onRecipeChange()"
              placeholder="Describe when this recipe should be used"></textarea>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label for="direction">Direction</label>
      <input type="text"
             id="direction"
             class="dsp-input"
             [(ngModel)]="recipe.direction"
             (input)="onRecipeChange()"
             placeholder="e.g. Current ⇒ Current">
    </div>

    <div class="form-group">
      <label for="connection">Connection</label>
      <input type="text"
             id="connection"
             class="dsp-input"
             [(ngModel)]="recipe.connection"
             (input)="onRecipeChange()">
    </div>

    <div class="form-group">
      <label for="pipeline">Pipeline</label>
      <input type="text"
             id="pipeline"
             class="dsp-input"
             [(ngModel)]="recipe.pipeline"
             (input)="onRecipeChange()"
             placeholder="e.g. Current ⇒ Current">
    </div>
  </div>

  <!-- DSP Versions -->
  <div class="form-group">
    <label>DSP Versions</label>
    <div class="dynamic-list">
      <div class="dynamic-item"
           *ngFor="let version of recipe.DSPVersions; let i = index; trackBy: trackByIndex">
        <input type="text"
               class="dsp-input"
               [(ngModel)]="recipe.DSPVersions[i]"
               (input)="onRecipeChange()"
               placeholder="Version">
        <button type="button"
                class="btn btn-sm btn-danger"
                (click)="removeDSPVersion(i)">−</button>
      </div>
      <button type="button"
              class="btn btn-sm btn-secondary"
              (click)="addDSPVersion()">+ Add Version</button>
    </div>
  </div>

  <!-- Keywords -->
  <div class="form-group">
    <label>Keywords</label>
    <div class="dynamic-list">
      <div class="dynamic-item"
           *ngFor="let keyword of recipe.keywords; let i = index; trackBy: trackByIndex">
        <input type="text"
               class="dsp-input"
               [(ngModel)]="recipe.keywords[i]"
               (input)="onRecipeChange()"
               placeholder="Keyword">
        <button type="button"
                class="btn btn-sm btn-danger"
                (click)="removeKeyword(i)">−</button>
      </div>
      <button type="button"
              class="btn btn-sm btn-secondary"
              (click)="addKeyword()">+ Add Keyword</button>
    </div>
  </div>

  <!-- Related Recipes -->
  <div class="form-group">
    <label>Related Recipes</label>
    <div class="dynamic-list">
      <div class="related-item"
           *ngFor="let related of recipe.relatedRecipes; let i = index; trackBy: trackByIndex">
        <input type="text"
               class="dsp-input"
               [(ngModel)]="related.title"
               (input)="onRecipeChange()"
               placeholder="Recipe Title">
        <input type="text"
               class="dsp-input"
               [(ngModel)]="related.url"
               (input)="onRecipeChange()"
               placeholder="Recipe URL">
        <button type="button"
                class="btn btn-sm btn-danger"
                (click)="removeRelatedRecipe(i)">−</button>
      </div>
      <button type="button"
              class="btn btn-sm btn-secondary"
              (click)="addRelatedRecipe()">+ Add Related Recipe</button>
    </div>
  </div>
</div>
